<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <title>
      Grace &amp; Moses
    </title>
    <meta name="author" content="">
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/i.css">
		<script type="text/javascript" src="//use.typekit.net/xdr1ekm.js"></script>
		<script type="text/javascript">try{Typekit.load();}catch(e){}</script>
  </head>
  <body class="rsvp-bg">
		<div class="container talign-center">
			<a href="http://www.graceandmoses.com" class="rsvp-logo">
			</a>
			<div class="rsvp-invite-text">
				<p class="h3 rsvp-invite-text-one">
					Together with their families,<br>
					<strong>Grace &amp; Moses</strong> invite <strong id="name"></strong><br>
					to celebrate their wedding day.
				</p>
				<p class="h5">
					<strong class="h4">Palmdale Estates</strong><br>
					159 Washington Blvd<br>
					Fremont, CA 94539
				</p>
				<p class="h5">
					<strong class="h4">Saturday, October 18th 2014</strong><br>
					Ten-thirty in the morning<br>
					Reception to follow
				</p>
			</div><br>
			<form action="" method="POST" id="rsvp-form" class="rsvp-form-container">
				<p class="h5">
					We've reserved <strong id="designated-seats"></strong> <span id="seat-word">seats</span> for you.<br>
					Please RSVP by <strong>Thursday, July 31st</strong> - thanks!
				</p>
				<label class="rsvp-label" for="attending">
					Are you planning on joining us?
				</label>
				<input type="radio" name="invitation[status]" value="accepted" class="rsvp--input-radio" required>
				<span class="rsvp-label-radio">Yes, I will be attending!</span><br>
				<input type="radio" name="invitation[status]" value="declined" class="rsvp--input-radio">
				<span class="rsvp-label-radio">No, I won't be able to join.</span><br>
				<label class="rsvp-label" for="attending">
					What should Grace &amp; Moses keep in mind when interacting with the in-laws?
				</label>
				<input type="text" name="invitation[questions][in_law_advice]" class="rsvp--input" required>
				<label class="rsvp-label" for="attending">
					What should Grace &amp; Moses always have in their refrigerator?
				</label>
				<input type="text" name="invitation[questions][fridge_advice]" class="rsvp--input" required>
				<label class="rsvp-label" for="attending">
					What is one word you would use to describe Grace &amp; Moses as a couple?
				</label>
				<input type="text" name="invitation[questions][one_word]" class="rsvp--input" required>
				<label class="rsvp-label" for="alcohol">
					What is your alcohol of choice?
				</label>
				<input type="radio" name="invitation[questions][preferred_alcohol]" value="Red Wine" class="rsvp--input-radio" required>
				<span class="rsvp-label-radio">Red Wine</span><br>
				<input type="radio" name="invitation[questions][preferred_alcohol]" value="White Wine" class="rsvp--input-radio">
				<span class="rsvp-label-radio">White Wine</span><br>
				<input type="radio" name="invitation[questions][preferred_alcohol]" value="Craft Beer" class="rsvp--input-radio">
				<span class="rsvp-label-radio">Craft Beer</span><br>
				<input type="radio" name="invitation[questions][preferred_alcohol]" value="Mimosa" class="rsvp--input-radio">
				<span class="rsvp-label-radio">Mimosa</span><br>
				<input type="radio" name="invitation[questions][preferred_alcohol]" value="Champagne" class="rsvp--input-radio">
				<span class="rsvp-label-radio">Champagne</span>
				<input type="hidden" name="_method" value="PUT">
				<button type="submit" class="rsvp--button-submit">Submit</button>
			</form>
		</div>

	</body>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
	<script type='text/javascript'>
		var APP_HOST = 'http://moseselee.herokuapp.com'
		$(document).ready(function() {
			var invite_code = getParameterByName('invite_code');
			var url = APP_HOST + '/invitations/' + invite_code + '.json';

			$.ajax({
				type: 'GET',
				url: url,
				dataType: "json",
				xhrFields: {
					withCredentials: true
				}
			}).done(function(data) {
				populateForm(data);
			});
		});

		function getParameterByName(name) {
			name = name.replace(/[\[]/, "\\[").replace(/[\]]/, "\\]");
			var regex = new RegExp("[\\?&]" + name + "=([^&#]*)"),
			results = regex.exec(location.search);
			return results == null ? "" : decodeURIComponent(results[1].replace(/\+/g, " "));
		}

		function populateForm(data) {
			$('#name').html(data.name);
			$('#designated-seats').html(data.designated_seats);
			if (data.designated_seats == 1) {
				$('#seat-word').html('seat');
			}
			$('#rsvp-form').attr('action', APP_HOST + '/invitations/' + data.id);
		}
	</script>
</html>
